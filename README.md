<p align="center">
  <img width="150" src="https://enjoygit.com/images/logo.png">
</p>

ç®€ä½“ä¸­æ–‡ | [English](./README.en.md)

# [å®˜ç½‘](https://enjoygit.com)

# Enjoy Git - ç®€æ˜“é«˜æ•ˆçš„Gitå®¢æˆ·ç«¯
ä¸€æ¬¾ç°ä»£åŒ–çš„Gitå®¢æˆ·ç«¯å·¥å…·ï¼Œæ‹¥æœ‰ç›´è§‚çš„ç”¨æˆ·ç•Œé¢ï¼Œé‡‡ç”¨Electronã€Vue3å’ŒTypeScriptæ„å»ºã€‚

## æ”¯æŒå¹³å°

### å·²æ”¯æŒ
- **Windows**
  - Windows 10 / Windows 11 (arm64 / x64)

### å³å°†æ”¯æŒ
- **macOS**ï¼šå› è‹¹æœå¼€å‘è€…è´¦å·é—®é¢˜å»¶è¿Ÿå‘å¸ƒã€‚
- **Linux**ï¼šè¿˜åœ¨æµ‹è¯•ä¸­ã€‚

## ç•Œé¢é¢„è§ˆ

### ä¸»é¡µ
ä¸€ç›®äº†ç„¶çš„çœ‹åˆ°ä»“åº“çŠ¶æ€ã€‚
![ä¸»é¡µ](https://enjoygit.com/images/index.png?timestamp=1694500000000)

### å¼ºå¤§çš„å·®å¼‚å¯¹æ¯”
> æ”¯æŒåŒæ å±•ç¤ºæ–‡ä»¶å·®å¼‚ï¼Œæ ¹æ®ä¸Šä¸‹è¡Œé«˜äº®ä¿®æ”¹å†…å®¹ï¼Œå¯å¿½ç•¥ç©ºæ ¼æŸ¥çœ‹å®è´¨æ€§å˜æ›´ã€‚ä¸ä»…æ”¯æŒä»£ç æ–‡ä»¶ï¼Œè¿˜èƒ½æŸ¥çœ‹å›¾ç‰‡çš„å·®å¼‚å¯¹æ¯”ã€‚
- åŒæ å±•ç¤ºæ–‡ä»¶diffï¼Œæ¸…æ™°å¯¹æ¯”
- é«˜äº®æ˜¾ç¤ºä¿®æ”¹çš„è¡Œï¼Œç›´è§‚è¯†åˆ«å˜æ›´
- æ”¯æŒå›¾ç‰‡diffï¼Œè½»æ¾å¯¹æ¯”è§†è§‰å˜æ›´
- æ”¯æŒå±•å¼€ä¸Šä¸‹æ–‡è¡Œï¼ŒæŸ¥çœ‹å®Œæ•´ä»£ç å˜æ›´
- å¯å¿½ç•¥ç©ºæ ¼å·®å¼‚ï¼Œèšç„¦ä»£ç å®è´¨å˜æ›´
- æ”¯æŒç¼–è¾‘å·¥ä½œåŒºæ–‡ä»¶ï¼Œç›´æ¥åœ¨å·®å¼‚å¯¹æ¯”ç•Œé¢ä¿®æ”¹
- é‡‡ç”¨è™šæ‹Ÿåˆ—è¡¨åŠ è½½diffæ–‡ä»¶ï¼Œä¸”ä»…åŠ è½½å½“å‰å¯è§åŒºåŸŸçš„å†…å®¹ï¼Œæé«˜æ€§èƒ½
![å¼ºå¤§çš„å·®å¼‚å¯¹æ¯”](https://enjoygit.com/images/diff.png)

### æ™ºèƒ½å†²çªè§£å†³
> å½“ä»£ç å‘ç”Ÿå†²çªï¼ˆåº”ç”¨è´®è—å†²çªï¼Œåˆå¹¶å†²çªï¼Œé´é€‰å†²çªï¼Œå˜åŸºå†²çªï¼Œå›æ»šå†²çªï¼‰æ—¶ï¼Œæä¾›ç›´è§‚çš„å†²çªè§£å†³ç•Œé¢ï¼Œåˆ†å—å±•ç¤ºå†²çªå†…å®¹ï¼Œæ”¯æŒé€‰æ‹©ä½¿ç”¨å½“å‰ç‰ˆæœ¬ã€ä¼ å…¥ç‰ˆæœ¬æˆ–ä¿ç•™åŒæ–¹æ›´æ”¹ï¼Œè½»æ¾è§£å†³å¤æ‚å†²çªã€‚
- å†²çªæ–‡ä»¶åˆ†å—å±•ç¤ºï¼Œæ¸…æ™°å®šä½é—®é¢˜
- çµæ´»é€‰æ‹©ä¿ç•™å½“å‰/ä¼ å…¥ç‰ˆæœ¬æˆ–åŒæ–¹æ›´æ”¹
- å¿«é€Ÿè·³è½¬åˆ°å†²çªä½ç½®ï¼Œæé«˜è§£å†³æ•ˆç‡
- æ”¯æŒè·³è¿‡å½“å‰å†²çªæˆ–ç»ˆæ­¢å†²çªè§£å†³è¿‡ç¨‹
![æ™ºèƒ½å†²çªè§£å†³](https://enjoygit.com/images/conflict.png)

### é«˜æ•ˆåˆ†æ”¯ä¸æäº¤ç®¡ç†
> è½»æ¾ç®¡ç†å¤šä¸ªåˆ†æ”¯ï¼Œä»ä»»æ„èµ·ç‚¹åˆ›å»ºæ–°åˆ†æ”¯ï¼ŒæŸ¥çœ‹è¯¦ç»†æäº¤å†å²ï¼Œæ”¯æŒcherry-pickæ“ä½œå°†ç‰¹å®šæäº¤åº”ç”¨åˆ°å½“å‰åˆ†æ”¯ã€‚
- ä»HEADã€æ ‡ç­¾ã€æäº¤æˆ–è¿œç«¯åˆ†æ”¯æ–°å»ºåˆ†æ”¯
- æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯åˆ—è¡¨ï¼Œè½»æ¾æ£€å‡ºåˆ‡æ¢
- æ”¯æŒcherry-pickï¼Œé€‰æ‹©æ€§åº”ç”¨æäº¤
- æŸ¥çœ‹æäº¤æ–‡ä»¶æ ‘ï¼Œäº†è§£å®Œæ•´ä»£ç çŠ¶æ€
- è™šæ‹Ÿåˆ—è¡¨å’Œåˆ†é¡µåŠ è½½ï¼ŒåŠ è½½é€Ÿåº¦å¿«ï¼Œæ€§èƒ½é«˜
![é«˜æ•ˆåˆ†æ”¯ä¸æäº¤ç®¡ç†](https://enjoygit.com/images/commit.png)

### æ–‡ä»¶å†å²è®°å½•
> æ”¯æŒæŸ¥çœ‹ç‰¹å®šåˆ†æ”¯ï¼Œç‰¹å®šæ–‡ä»¶çš„å†å²è®°å½•ï¼Œæ–¹ä¾¿å›æº¯ä»£ç å˜æ›´ã€‚
- æŸ¥çœ‹ç‰¹å®šæ–‡ä»¶çš„å†å²è®°å½•
- æ”¯æŒåˆ‡æ¢åˆ†æ”¯ç­›é€‰
- æ”¯æŒæœç´¢å…³é”®è¯ç­›é€‰
![æ–‡ä»¶å†å²è®°å½•](https://enjoygit.com/images/history.png)

### æŒ‰è¡Œå®¡é˜…æ–‡ä»¶
> åˆ©ç”¨ `git blame` åŠŸèƒ½æŸ¥çœ‹æ–‡ä»¶ä¸­æ¯ä¸€è¡Œä»£ç çš„ä½œè€…ã€æäº¤ä¿¡æ¯å’Œæ—¶é—´æˆ³ï¼Œå¸®åŠ©å›¢é˜Ÿè¿½è¸ªä»£ç å˜æ›´å†å²ï¼Œç¡®å®šæ¯è¡Œä»£ç çš„è´£ä»»äººï¼Œä¾¿äºä»£ç å®¡æŸ¥å’Œé—®é¢˜è¿½æº¯ã€‚
- æŸ¥çœ‹ç‰¹å®šæ–‡ä»¶çš„å†å²è®°å½•
- æ”¯æŒåˆ‡æ¢åˆ†æ”¯ç­›é€‰
- æ”¯æŒæœç´¢å…³é”®è¯ç­›é€‰
![æŒ‰è¡Œå®¡é˜…æ–‡ä»¶](https://enjoygit.com/images/blame.png)

## æ ¸å¿ƒåŠŸèƒ½äº®ç‚¹

### ğŸ” å·¥ä½œåŒºä¸æš‚å­˜åŒºç®¡ç†
- å®æ—¶å±•ç¤ºå·¥ä½œåŒº/æš‚å­˜åŒºå˜æ›´æ–‡ä»¶åˆ—è¡¨ï¼Œæ¸…æ™°åŒºåˆ†ã€Œæœªè·Ÿè¸ªã€ã€Œå·²ä¿®æ”¹ã€ã€Œå·²æš‚å­˜ã€çŠ¶æ€
- æ”¯æŒå•ä¸ªæ–‡ä»¶diffæŸ¥çœ‹ï¼Œå¯ç²¾ç¡®é€‰ä¸­**ç‰¹å®šdiffè¡Œ**æ‰§è¡Œæ“ä½œï¼š
  - ä¸¢å¼ƒé€‰ä¸­å˜æ›´ï¼ˆæ”¾å¼ƒæœ¬åœ°ä¿®æ”¹ï¼‰
  - åŠ å…¥æš‚å­˜åŒºï¼ˆéƒ¨åˆ†æäº¤æ”¯æŒï¼‰
  - ç§»å‡ºæš‚å­˜åŒºï¼ˆå–æ¶ˆæš‚å­˜ï¼‰

### ğŸš€ è¿œç¨‹ä»“åº“äº¤äº’
- **Fetch/Pull**ï¼š
  - æ”¯æŒæ™®é€šæ‹‰å–ä¸`rebase pull`æ¨¡å¼åˆ‡æ¢
  - æ‹‰å–å‰å¯è‡ªåŠ¨å°†æœ¬åœ°å˜æ›´æš‚å­˜ï¼Œæ‹‰å–åè‡ªåŠ¨åº”ç”¨ï¼Œé¿å…å†²çª
- **Push**ï¼š
  - æ”¯æŒæŒ‡å®šåˆ†æ”¯æ¨é€ï¼Œå¯é€‰ã€Œå¼ºåˆ¶æ¨é€ã€ï¼ˆéœ€äºŒæ¬¡ç¡®è®¤ï¼‰
  - æ¨é€å‰è‡ªåŠ¨æ ¡éªŒè¿œç«¯æƒé™ä¸åˆ†æ”¯ä¿æŠ¤è§„åˆ™

### âœï¸ æäº¤ä¸å†å²ç®¡ç†
- **Commit**ï¼š
  - æš‚å­˜åŒºæ–‡ä»¶ä¸€é”®æäº¤ï¼Œæ”¯æŒå¡«å†™ã€Œæ ‡é¢˜+è¯¦ç»†æè¿°ã€è§„èŒƒä¿¡æ¯
  - æ”¯æŒ`git amend`ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤ï¼ˆä¿ç•™å˜æ›´å†å²è¿ç»­æ€§ï¼‰
  - å¯æŸ¥çœ‹ä¸€ä¸ªæäº¤æˆ–å¤šä¸ªè¿ç»­æäº¤ä¸­ä¿®æ”¹äº†å“ªäº›æ–‡ä»¶ï¼Œè¿˜å¯æŸ¥çœ‹å½“æ—¶æäº¤çŠ¶æ€çš„å®Œæ•´æ–‡ä»¶æ ‘
- **æäº¤è®°å½•è¿½æº¯**ï¼š
  - å¤šç»´åº¦æŸ¥çœ‹æäº¤å†å²ï¼ˆå½“å‰åˆ†æ”¯/æœ¬åœ°åˆ†æ”¯/è¿œç«¯åˆ†æ”¯ï¼‰
  - æ”¯æŒ**åˆ é™¤æäº¤**ã€Œè½¯é‡ç½®ã€ã€Œç¡¬é‡ç½®ã€ã€Œæ’¤é”€æäº¤ã€ç­‰æ“ä½œ
  - å¯å°†å•ä¸ªæˆ–å¤šä¸ªæäº¤`cherry-pick`åˆ°ç›®æ ‡åˆ†æ”¯ï¼Œç²¾å‡†è¿ç§»å˜æ›´

### ğŸŒ¿ åˆ†æ”¯ä¸æ ‡ç­¾ç®¡ç†
- **åˆ†æ”¯æ“ä½œ**ï¼š
  - ä»ã€Œå½“å‰HEAD/æ ‡ç­¾/ç‰¹å®šæäº¤/è¿œç«¯åˆ†æ”¯ã€å¿«é€Ÿæ–°å»ºåˆ†æ”¯
  - å¯è§†åŒ–åˆ†æ”¯åˆ—è¡¨ï¼Œæ”¯æŒæ£€å‡ºæœ¬åœ°/è¿œç«¯åˆ†æ”¯ã€åˆ é™¤åˆ†æ”¯
  - å¤šè¿œç«¯ç®¡ç†ï¼šæ–°å¢/ç¼–è¾‘/åˆ é™¤è¿œç«¯ä»“åº“é…ç½®ï¼Œæ”¯æŒhttp/sshåè®®
- **æ ‡ç­¾åŠŸèƒ½**ï¼š
  - æ–°å»ºæ ‡ç­¾ï¼ˆå«æ³¨é‡Šæ ‡ç­¾ï¼‰ã€æ£€å‡ºå†å²æ ‡ç­¾ç‰ˆæœ¬ã€åˆ é™¤æ ‡ç­¾
  - æ”¯æŒç­›é€‰ä¸æœç´¢

### ğŸ“¦ è´®è—ç®¡ç†
- ä¸€é”®è´®è—æ‰€æœ‰å˜æ›´ï¼Œæˆ–ç²¾å‡†é€‰æ‹©ç‰¹å®šæ–‡ä»¶è¿›è¡Œè´®è—ï¼ˆå®Œæ•´ä¿ç•™æš‚å­˜åŒºçŠ¶æ€ï¼‰
- æ”¯æŒåº”ç”¨æŒ‡å®šè´®è—åˆ°å½“å‰å·¥ä½œåŒºã€é€‰ä¸­åˆ é™¤ ä¸€ä¸ª/å¤šä¸ª è´®è—ã€æ‰¹é‡æ¸…ç©ºæ‰€æœ‰è´®è—è®°å½•

### ğŸ”€ å†²çªè§£å†³
- å†²çªæ–‡ä»¶åˆ†å—å¯è§†åŒ–å±•ç¤ºï¼Œæ”¯æŒæŒ‰æ®µè½é€‰æ‹©ã€Œå½“å‰ç‰ˆæœ¬/ä¼ å…¥ç‰ˆæœ¬/ä¿ç•™åŒæ–¹æ›´æ”¹ã€
- å¿«æ·æ“ä½œï¼šä¸€é”®è·³è½¬åˆ°ä¸‹ä¸€ä¸ªå†²çªä½ç½®ã€ä¸´æ—¶è·³è¿‡å½“å‰å†²çªã€ç»ˆæ­¢å†²çªè§£å†³æµç¨‹
- ç±»VSCodeå¼å†²çªç¼–è¾‘å™¨ï¼Œç›´è§‚å¯¹æ¯”å·®å¼‚ï¼Œé™ä½æ‰‹åŠ¨åˆå¹¶å¤æ‚åº¦

### ğŸ“„ æ–‡ä»¶diffä¸å†å²è¿½è¸ª
- **diffå¢å¼ºåŠŸèƒ½**ï¼š
  - æ”¯æŒå›¾ç‰‡diffé¢„è§ˆ
  - åŒæ å¯¹æ¯”/å•è¡Œé«˜äº®æ¨¡å¼åˆ‡æ¢ï¼Œå¯å¿½ç•¥ç©ºæ ¼å·®å¼‚
  - æŒ‰è¡Œé«˜äº®ä¿®æ”¹å†…å®¹ï¼Œæ¸…æ™°åŒºåˆ†ã€Œæ–°å¢/åˆ é™¤/ä¿®æ”¹ã€è¡Œ
  - æ”¯æŒä»£ç é«˜äº®
  - å¯å±•å¼€ç‰¹å®šçš„ä¸Šä¸‹æ–‡å…³è”è¡Œæˆ–ä¸€é”®å±•å¼€å®Œæ•´è¡Œ
- **æ–‡ä»¶å†å²ä¸æº¯æº**ï¼š
  - å•ç‹¬çª—å£å±•ç¤ºæ–‡ä»¶å®Œæ•´æäº¤å†å²ï¼Œå«æ¯æ¬¡å˜æ›´çš„diffè¯¦æƒ…
  - æŒ‰è¡Œå®¡é˜…ï¼šæŸ¥çœ‹æ–‡ä»¶æ¯ä¸€è¡Œçš„æœ€åä¿®æ”¹è€…ä¸å¯¹åº”æäº¤
  - æ”¯æŒé‡ç½®æ–‡ä»¶åˆ°ç‰¹å®šæäº¤ç‰ˆæœ¬ï¼Œæˆ–ç”¨å¤–éƒ¨ç¨‹åºæ‰“å¼€ã€Œæœ€æ–°ç‰ˆ/å½“å‰ä¿®æ”¹ç‰ˆã€
- **æäº¤å†…å®¹åˆ†æ**ï¼š
  - æŸ¥çœ‹å•ä¸ª/è¿ç»­å¤šä¸ªæäº¤çš„æ–‡ä»¶diffåˆ—è¡¨ä¸æ ‘å½¢ç»“æ„
  - å±•ç¤ºæŸä¸€commitçš„å®Œæ•´æ–‡ä»¶æ ‘ï¼ˆå½“å‰HEADæ‰€æœ‰æ–‡ä»¶å¿«ç…§ï¼‰

### ğŸ› ï¸ åŸºç¡€ä»“åº“ç®¡ç†
- å†…ç½®Gitç¯å¢ƒï¼Œæ— éœ€é¢å¤–å®‰è£…ä¾èµ–
- æ”¯æŒæ·»åŠ æœ¬åœ°å·²å­˜åœ¨çš„Gitä»“åº“ï¼Œæˆ–é€šè¿‡http/sshå…‹éš†è¿œç«¯ä»“åº“
- å…‹éš†æ—¶è‡ªåŠ¨æ ¡éªŒæƒé™ï¼ˆsshå¯†é’¥/ç”¨æˆ·åå¯†ç ï¼‰ï¼Œå¤±è´¥æ—¶æä¾›è¯¦ç»†é”™è¯¯æç¤º

## ä¸‹è½½ä¸å®‰è£…
- å‰å¾€ [Github release](https://github.com/huangcs427/enjoy-git-release/releases) ä¸‹è½½å¯¹åº”çš„å®‰è£…åŒ…ï¼ŒæŒ‰ç…§å¼•å¯¼å®Œæˆå®‰è£…å³å¯ã€‚
- å‰å¾€ [GitCode release](https://gitcode.com/huangcs-427/enjoy-git-release/releases) ä¸‹è½½å¯¹åº”çš„å®‰è£…åŒ…ï¼ŒæŒ‰ç…§å¼•å¯¼å®Œæˆå®‰è£…å³å¯ã€‚

## ä½¿ç”¨å¸®åŠ©
- é‡åˆ°é—®é¢˜ï¼Ÿæäº¤ [Github Issue](https://github.com/huangcs427/enjoy-git-release/issues) å‘æˆ‘åé¦ˆ
- é‡åˆ°é—®é¢˜ï¼Ÿæäº¤ [GitCode Issue](https://gitcode.com/huangcs-427/enjoy-git-release/issues) å‘æˆ‘åé¦ˆ

## dugite-native è°ƒç”¨æºä»£ç 
```ts
/**
 * æœ¬è½¯ä»¶å†…ç½®çš„Gitä½¿ç”¨äº†dugite-native
 * é¡¹ç›®åœ°å€ï¼šhttps://github.com/desktop/dugite-native
 * æœ¬æ–‡ä»¶åŒ…å«äº†è·å–gitè·¯å¾„å’Œç¯å¢ƒå˜é‡çš„å‡½æ•°ï¼Œä»¥åŠå¯¼å‡ºgitå‘½ä»¤å‡½æ•°çš„ä»£ç ã€‚
 */
import { spawn } from 'child_process';
import * as fs from 'fs-extra';
import * as path from 'path';

// è·å–windowsçš„gitå®ä¾‹å­ç›®å½•ï¼Œæ ¹æ®æ¶æ„è¿”å›ä¸åŒçš„ç›®å½•
const getWin32GitSubfolder = (arch?: string): string => {
  const archRes = arch || process.arch
  if (archRes === 'x64') {
    return 'mingw64'
  } else if (archRes === 'arm64') {
    return 'clangarm64'
  } else {
    return 'mingw32'
  }
}

// è·å–gitè·¯å¾„å’Œç¯å¢ƒå˜é‡
interface TObjectValue {
  [key: string]: any
}
const getGitPathAndGitEnv = (envTemp?: TObjectValue) => {
  let env = { ...process.env, ...(envTemp || {}) }
  // æ­¤å¤„å‡è®¾gitFolderä¸ºå½“å‰æ–‡ä»¶å¤¹ä¸‹çš„gitæ–‡ä»¶å¤¹
  const gitFolder = path.join(__dirname, 'git')
  let gitPath = ''
  // windowsä¸‹ï¼Œgitè·¯å¾„ä¸ºgitFolder\cmd\git.exe
  if (process.platform === 'win32') {
    const win32GitSubfolder = getWin32GitSubfolder()
    gitPath = path.join(gitFolder, 'cmd', 'git.exe')
    env.GIT_EXEC_PATH = path.join(gitFolder, win32GitSubfolder, 'libexec', 'git-core')
    env.PATH = `${gitFolder}\\${win32GitSubfolder}\\bin;${gitFolder}\\${win32GitSubfolder}\\usr\\bin;${env.PATH ?? ''}`
  } else {
    // å…¶ä»–å¹³å°ä¸‹ï¼Œgitè·¯å¾„ä¸ºgitFolder\bin\git
    gitPath = path.join(gitFolder, 'bin', 'git')
    env.GIT_CONFIG_SYSTEM = path.join(gitFolder, 'etc', 'gitconfig')
    env.GIT_EXEC_PATH = path.join(gitFolder, 'libexec', 'git-core')
    env.GIT_TEMPLATE_DIR = path.join(gitFolder, 'share', 'git-core', 'templates')
  }
  // å¦‚æœgitè·¯å¾„ä¸å­˜åœ¨ï¼Œä½¿ç”¨ç³»ç»Ÿgit
  if (!fs.existsSync(gitPath)) {
    env = { ...envTemp }
    gitPath = 'git'
  }
  return { env, gitPath }
}

// å¯¼å‡ºgitå‘½ä»¤å‡½æ•°
export const git = (args: string[], options: TObjectValue) => {
  if (!options) options = {}
  const { gitPath, env } = getGitPathAndGitEnv(options.env)
  options.env = env
  return spawn(gitPath, args, options)
}
```

## åé¦ˆä¸å»ºè®®
æ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼æå‡ºå®è´µæ„è§ï¼š
- æäº¤ [Github Issue](https://github.com/huangcs427/enjoy-git-release/issues)
- æäº¤ [GitCode Issue](https://gitcode.com/huangcs-427/enjoy-git-release/issues)
- é‚®ä»¶è”ç³»ï¼šhuangcs427@163.com
